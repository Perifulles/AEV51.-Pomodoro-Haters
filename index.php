<?php

$pomodoroHaters = [
    ['~', '~', '~', '~', '~', '~', '~', '~', '~', '~', '~', '~', '~', '~', '~', '~', '~', '~', '~', '~', '~', '~', '~', '~'],
    ['~', '~', '~', '~', '~', '0', '0', 'A', '0', 'A', '0', '0', 'A', '0', '~', '~', '~', '~', '~', '~', '~', '~', '~', '~'],
    ['~', '~', '~', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '~', '~', '~', '~', '~', '~', '~', '~', '~', '~', '~'],
    ['~', '~', '~', '0', '0', '0', '0', '0', '0', 'A', '0', '0', '0', '0', 'A', '0', '~', '~', '~', '~', '~', '~', '~', '~'],
    ['~', '~', '~', '~', '~', '0', '0', '0', '0', '0', 'A', 'A', '0', '~', '~', '~', '~', '~', '~', '~', '~', '~', '~', '~'],
    ['~', '~', '~', '~', '~', '~', '0', '0', '0', '0', '0', 'A', '0', '0', 'A', 'A', 'A', '0', '~', '~', '~', '~', '~', '~'],
    ['~', '~', '0', '0', '0', 'A', '0', 'A', 'A', '0', '0', '0', '0', '0', '0', '0', 'A', '0', '0', '0', 'A', '0', '0', '~'],
    ['~', '~', '~', '~', '~', '~', '0', '0', 'A', '0', '0', '0', 'A', '0', '0', '0', '0', '0', '0', 'A', '0', '0', '0', '~'],
    ['~', '~', '~', '~', '~', '~', '~', '~', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '~'],
    ['~', '~', '~', '~', '~', '0', '0', 'A', '0', '0', '0', '0', '0', '~', '~', '~', '~', '~', '~', '~', '~', '~', '~', '~'],
    ['~', '~', '~', '~', '~', '0', '0', '0', '0', '0', 'A', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '~', '~', '~'],
    ['~', '~', '~', '0', '0', '0', '0', '0', '0', '0', 'A', '0', '0', '0', '0', '0', '0', '0', '0', '~', '~', '~', '~', '~'],
    ['~', '0', '0', '0', '0', '0', '0', '0', '0', 'A', '0', '0', '0', 'A', '0', '0', '0', '0', '0', 'A', '0', '~', '~', '~'],
    ['~', '~', '~', '~', '~', '~', '~', '~', '~', '0', '0', '0', '0', 'A', '0', '0', '~', '~', '~', '~', '~', '~', '~', '~'],
    ['~', '~', '~', '~', '~', '~', '~', '~', '~', '0', '0', '0', 'A', 'A', 'A', '0', '0', 'A', '0', '0', '0', '~', '~', '~'],
    ['~', '~', '~', '~', '0', 'A', 'A', '0', '0', 'A', '0', '0', '0', 'A', '0', '0', '0', '0', '~', '~', '~', '~', '~', '~'],
    ['~', '~', '~', '~', '~', '~', '~', '~', '~', '~', '~', '0', 'A', '0', '0', '0', '~', '~', '~', '~', '~', '~', '~', '~'],
    ['~', '~', '~', '~', '~', '~', '~', '~', '0', '0', '0', 'A', '0', '0', '0', '0', '0', 'A', '0', 'A', '0', '0', '0', '~'],
    ['~', '~', '~', '0', 'A', '0', '0', '0', '0', '0', '0', '0', '0', 'A', '0', '0', '0', '~', '~', '~', '~', '~', '~', '~'],
    ['~', '~', '~', '~', '~', '~', '~', '~', '~', '0', '0', '0', 'A', '0', '0', 'A', '0', '~', '~', '~', '~', '~', '~', '~'],
    ['~', '~', '~', '~', '0', '0', '0', '0', 'A', '0', '0', '0', '0', 'A', '0', '~', '~', '~', '~', '~', '~', '~', '~', '~'],
    ['~', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', 'A', '0', '0', '0', '0', '0', '0', '~', '~', '~', '~', '~', '~'],
    ['~', '~', '~', '~', '~', '0', '0', '0', '0', '0', 'A', '0', '0', '0', '~', '~', '~', '~', '~', '~', '~', '~', '~', '~'],
    ['~', '~', '~', '~', '~', '~', '~', '~', '~', '~', '~', '~', '~', '~', '~', '~', '~', '~', '~', '~', '~', '~', '~', '~']
];
$impacts = [
    [20, 4],
    [2, 13],
    [13, 12],
    [3, 17],
    [2, 13],
    [5, 19],
    [6, 18],
    [5, 2],
    [20, 13],
    [9, 7],
    [5, 9],
    [15, 16],
    [16, 13],
    [16, 9],
    [16, 0],
    [3, 19],
    [19, 8],
    [1, 16],
    [18, 4],
    [21, 23],
    [7, 17],
    [22, 15],
    [21, 6],
    [14, 8],
    [12, 23],
    [7, 7],
    [22, 4],
    [3, 21],
    [2, 3],
    [8, 11],
    [0, 4],
    [7, 21],
    [11, 4],
    [7, 15],
    [6, 17],
    [5, 19],
    [4, 19],
    [4, 7],
    [23, 21],
    [15, 20],
    [2, 9],
    [21, 2],
    [1, 13],
    [7, 10],
    [21, 5],
    [13, 17],
    [2, 14],
    [11, 14],
    [22, 17],
    [18, 22],
    [2, 23],
    [3, 1],
    [18, 6],
    [17, 12],
    [18, 18],
    [20, 2],
    [3, 14],
    [11, 21],
    [6, 5],
    [6, 2],
    [12, 23],
    [18, 18],
    [21, 6],
    [10, 12],
    [5, 4],
    [16, 19],
    [8, 10],
    [12, 21],
    [15, 1],
    [20, 14],
    [3, 20],
    [6, 19],
    [20, 13],
    [15, 4],
    [10, 2],
    [5, 16],
    [20, 1],
    [12, 13],
    [11, 5],
    [12, 14],
    [8, 3],
    [6, 8],
    [19, 7],
    [16, 9],
    [13, 20],
    [3, 5],
    [1, 0],
    [20, 14],
    [12, 21],
    [12, 16],
    [15, 7],
    [9, 1],
    [1, 18],
    [20, 6],
    [8, 6],
    [22, 1],
    [10, 22],
    [19, 19],
    [7, 16],
    [8, 8]
];

//ESCRIBE AQUÍ TU PROGRAMA PRINCIPAL

show($pomodoroHaters);

$impactosUrbanos=impactosUrbanos($pomodoroHaters, $impacts);
show($impactosUrbanos);

$colirio=colirio($impactosUrbanos);

echo "<br>Han habido un total de $colirio[0] afectados y se necesitan $colirio[1] litros de colirio.<br><br>";

$todoslosimpactos = todoslosimpactos ($pomodoroHaters, $impacts);
show($todoslosimpactos);

$costes = costes($todoslosimpactos);
echo"<br>Teniendo en cuenta que cada km2 de zona no urbana cuesta 50.000€ de limpiar, y cada km2 de zona urbana cuesta 200.000€ de limpiar los costes totales ascienden a: $costes" ."€";

$CalculoMar = CalculoMar($todoslosimpactos);
echo 
"<br><br>En total hay " . $CalculoMar["total"] . "Km2 de mar<br>
El total de km2 de mar que SI que se ha visto afectado han sido:" . $CalculoMar["marsi"] .
"<br>El total de km2 de mar que NO que se ha visto afectado han sido:" . $CalculoMar["marno"] .
"<br> Hemos calculado que la media de pescado, la cual nos da " . $CalculoMar["mediapescado"] . " toneladas de pescado por km2
por lo que se han visto afectadas " . $CalculoMar["pescadoafectado"] . " toneladas de pescado"
;

function CalculoMar(array $namearray){
    $marsi = 0;
    $marno = 0;
    foreach($namearray as $filas){
        foreach($filas as $km2){
            if($km2 == "~"){
                $marno ++;
            }
            elseif($km2 == "S"){
                $marsi ++;
            }
    }}
    $totalmar = $marno + $marsi;

    $totalpescado = 2000;
    $mediapescadoporKm2 = $totalpescado / $totalmar;
    $pescadoAfectdo = $mediapescadoporKm2 * $marsi;

    return[
        "marno" => $marno,
        "marsi" => $marsi, 
        "total" => $totalmar,
        "mediapescado" => $mediapescadoporKm2,
        "pescadoafectado" => $pescadoAfectdo
    ];
}

function costes($namearray){
    $costes = 0;
    foreach($namearray as $filas){
        foreach($filas as $km2){
            if($km2 == "C"){
                $costes += 200000;
            }
            elseif($km2 == "X"){
                $costes += 50000;
            }
    }}
    return($costes);
}

function todoslosimpactos (array $namearray, array $impactos){
    foreach($impactos as $xy){
        if ($namearray[$xy[0]][$xy[1]] == "A"){
            $namearray[$xy[0]][$xy[1]] = "C";}

            elseif($namearray[$xy[0]][$xy[1]] == "~"){
                $namearray[$xy[0]][$xy[1]] = "S";}

                elseif($namearray[$xy[0]][$xy[1]] == "0"){
                    $namearray[$xy[0]][$xy[1]] = "X";}
    }
    return $namearray;
}

function impactosUrbanos (array $namearray, array $impactos){
    foreach($impactos as $xy){
        if ($namearray[$xy[0]][$xy[1]] == "A"){
            $namearray[$xy[0]][$xy[1]] = "C";}
            else{
            $namearray[$xy[0]][$xy[1]] = $namearray[$xy[0]][$xy[1]];
            } 
    }
    return $namearray;
}

function show(array $namearray){
    foreach($namearray as $lineas){
     foreach($lineas as $bloques){
        echo "$bloques";
    }echo "<br>";
    }
}

function colirio(array $namearray){
    $afectados = 0;
    foreach($namearray as $filas){
        foreach($filas as $km2){
            if($km2 == "C"){
                $afectados += 5000;
            }
        }
    }
    $litroscolirio = $afectados * 0.025;
    return[$afectados,$litroscolirio];
}


//ESCRIBE AQUÍ LA DEFINICIÓN DE LAS FUNCIONES




?>